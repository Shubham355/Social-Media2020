{"ast":null,"code":"import React,{Fragment}from'react';import{Link}from'react-router-dom';import{connect}from'react-redux';import Moment from'react-moment';import{addLike,removeLike,dislike,removeDislike,deletePost}from'../../actions/post';import swal from'sweetalert';var PostItem=function PostItem(_ref){var addLike=_ref.addLike,removeLike=_ref.removeLike,dislike=_ref.dislike,removeDislike=_ref.removeDislike,deletePost=_ref.deletePost,auth=_ref.auth,_ref$post=_ref.post,_id=_ref$post._id,text=_ref$post.text,name=_ref$post.name,avatar=_ref$post.avatar,user=_ref$post.user,likes=_ref$post.likes,dislikes=_ref$post.dislikes,comments=_ref$post.comments,date=_ref$post.date,showActions=_ref.showActions;var customDelete=function customDelete(id){swal({title:'Are you sure?',text:'Once deleted, you will not be able to recover this post!',icon:'warning',buttons:true,dangerMode:true}).then(function(willDelete){if(willDelete){deletePost(id);}});};var likeButton=function likeButton(postId){likes.filter(function(like){return like.user.id===auth.user._id;}).length>0?removeLike(postId):addLike(postId);};var dislikeButton=function dislikeButton(postId){dislikes.filter(function(dislike){return dislike.user.id===auth.user._id;}).length>0?removeDislike(postId):dislike(postId);};return/*#__PURE__*/React.createElement(\"div\",{className:\"post bg-white p-1 my-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"topPadding\"},/*#__PURE__*/React.createElement(Link,{to:\"/profile/\".concat(user)},/*#__PURE__*/React.createElement(\"img\",{className:\"round-img\",src:avatar,alt:\"\"}),/*#__PURE__*/React.createElement(\"h4\",{className:\"topPadding\"},name))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",{className:\"my-1 centeredText\"},text),/*#__PURE__*/React.createElement(\"p\",{className:\"post-date\"},\"Posted on \",/*#__PURE__*/React.createElement(Moment,{format:\"YYYY/MM/DD\"},date)),showActions&&/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return likeButton(_id);},type:\"button\",className:\"btn btn-light mx-8percent\"},likes.filter(function(like){return like.user.id===auth.user._id;}).length>0?/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-thumbs-up\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-thumbs-o-up\"}),' ',likes.length>0&&/*#__PURE__*/React.createElement(\"span\",null,likes.length)),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return dislikeButton(_id);},type:\"button\",className:\"btn btn-light mx-8percent\"},dislikes.filter(function(dislike){return dislike.user.id===auth.user._id;}).length>0?/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-thumbs-down\"}):/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-thumbs-o-down\"}),' ',dislikes.length>0&&/*#__PURE__*/React.createElement(\"span\",null,dislikes.length)),/*#__PURE__*/React.createElement(Link,{to:\"/posts/\".concat(_id),className:\"btn mx-8percent\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-comment-o\"}),' ',comments.length>0&&/*#__PURE__*/React.createElement(\"span\",null,comments.length)),!auth.loading&&user===auth.user._id&&/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(e){return customDelete(_id);},type:\"button\",className:\"btn btn-danger mx-8percent\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash\"})))));};PostItem.defaultProps={showActions:true};var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps,{addLike:addLike,removeLike:removeLike,dislike:dislike,removeDislike:removeDislike,deletePost:deletePost})(PostItem);","map":{"version":3,"sources":["/home/shubham/Desktop/Socialmedia_MERN/client/src/components/posts/PostItem.js"],"names":["React","Fragment","Link","connect","Moment","addLike","removeLike","dislike","removeDislike","deletePost","swal","PostItem","auth","post","_id","text","name","avatar","user","likes","dislikes","comments","date","showActions","customDelete","id","title","icon","buttons","dangerMode","then","willDelete","likeButton","postId","filter","like","length","dislikeButton","e","loading","defaultProps","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Moment from 'react-moment';\nimport {\n  addLike,\n  removeLike,\n  dislike,\n  removeDislike,\n  deletePost,\n} from '../../actions/post';\nimport swal from 'sweetalert';\n\nconst PostItem = ({\n  addLike,\n  removeLike,\n  dislike,\n  removeDislike,\n  deletePost,\n  auth,\n  post: { _id, text, name, avatar, user, likes, dislikes, comments, date },\n  showActions,\n}) => {\n  const customDelete = (id) => {\n    swal({\n      title: 'Are you sure?',\n      text: 'Once deleted, you will not be able to recover this post!',\n      icon: 'warning',\n      buttons: true,\n      dangerMode: true,\n    }).then((willDelete) => {\n      if (willDelete) {\n        deletePost(id);\n      }\n    });\n  };\n\n  const likeButton = (postId) => {\n    likes.filter((like) => like.user.id === auth.user._id).length > 0\n      ? removeLike(postId)\n      : addLike(postId);\n  };\n\n  const dislikeButton = (postId) => {\n    dislikes.filter((dislike) => dislike.user.id === auth.user._id).length > 0\n      ? removeDislike(postId)\n      : dislike(postId);\n  };\n\n  return (\n    <div className='post bg-white p-1 my-1'>\n      <div className=\"topPadding\">\n        <Link to={`/profile/${user}`}>\n          <img className='round-img' src={avatar} alt='' />\n          <h4 className=\"topPadding\">{name}</h4>\n        </Link>\n      </div>\n\n      <div>\n        <p className='my-1 centeredText'>{text}</p>\n        <p className='post-date'>\n          Posted on <Moment format='YYYY/MM/DD'>{date}</Moment>\n        </p>\n\n        {showActions && (\n          <Fragment>\n            <button\n              onClick={(e) => likeButton(_id)}\n              type='button'\n              className='btn btn-light mx-8percent'\n            >\n              {likes.filter((like) => like.user.id === auth.user._id).length >\n              0 ? (\n                <i className='fas fa-thumbs-up' />\n              ) : (\n                <i className='fa fa-thumbs-o-up'></i>\n              )}{' '}\n              {likes.length > 0 && <span>{likes.length}</span>}\n            </button>\n            <button\n              onClick={(e) => dislikeButton(_id)}\n              type='button'\n              className='btn btn-light mx-8percent'\n            >\n              {dislikes.filter((dislike) => dislike.user.id === auth.user._id)\n                .length > 0 ? (\n                <i className='fas fa-thumbs-down' />\n              ) : (\n                <i className='fa fa-thumbs-o-down'></i>\n              )}{' '}\n              {dislikes.length > 0 && <span>{dislikes.length}</span>}\n            </button>\n            <Link to={`/posts/${_id}`} className='btn mx-8percent'>\n              <i className='fa fa-comment-o'></i>{' '}\n              {comments.length > 0 && <span>{comments.length}</span>}\n            </Link>\n            {!auth.loading && user === auth.user._id && (\n              <button\n                onClick={(e) => customDelete(_id)}\n                type='button'\n                className='btn btn-danger mx-8percent'\n              >\n                <i className='fa fa-trash'></i>\n              </button>\n            )}\n          </Fragment>\n        )}\n      </div>\n    </div>\n  );\n};\n\nPostItem.defaultProps = {\n  showActions: true,\n};\n\nPostItem.propTypes = {\n  post: PropTypes.object.isRequired,\n  auth: PropTypes.object.isRequired,\n  addLike: PropTypes.func.isRequired,\n  removeLike: PropTypes.func.isRequired,\n  dislike: PropTypes.func.isRequired,\n  removeDislike: PropTypes.func.isRequired,\n  deletePost: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth,\n});\n\nexport default connect(mapStateToProps, {\n  addLike,\n  removeLike,\n  dislike,\n  removeDislike,\n  deletePost,\n})(PostItem);\n"]},"metadata":{},"sourceType":"module"}